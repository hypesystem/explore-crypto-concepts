---
permalink: cbc/
---
<div class="infobox">
    <p>
        <strong>CBC</strong> is an abbreviation for Chaining Block Cipher.
        It is a way of combining <a href="/psudorandom-functions/">psudorandom functions</a> with <a href="/xor/">xor'ing</a> in order to stretch a single key to several blocks of input.
        This is useful when an input (often a message) exceeds the length of the output of the pseudorandom function.
        It is, simply put, an algorithm for allowing longer messages to be mapped with a single key.
    </p>
    <p>
        CBC is used in <a href="/cbc-encryption/">encryption</a> and in <a href="/cbc-mac/">message authentication codes</a>.
    </p>
    <p>
        CBC works on blocks of length n by splitting a long input m into several smaller blocks m<sub>1..i..d</sub> where d=|m|/n.
        The first block, m<sub>1</sub>, is passed into a pseudorandom function F<sub>k</sub> where k is the key selecting the pseudorandom function from the space of possible pseudorandom functions.
        The output of F<sub>k</sub>(m<sub>1</sub>) is outputted as o<sub>1</sub>.
        For all subsequent input blocks, here m<sub>i</sub>, the block is first xor'ed with the output of the previous block, then passed into the pseudorandom function F<sub>k</sub>.
        That is, o<sub>i</sub>=F<sub>k</sub>(m<sub>i</sub> ⊕ o<sub>i-1</sub>) for i=2..d.
    </p>
    <p>
        Formally, a CBC construction can be described as such:
        ...
    </p>
</div>
<div class="playground">
    Pseudorandom function family: <select class="pseudorandom-function-picker"><option>?</option></select><br>
    Key: <input type="text"><br>
    Blocks of input: <input type="number" class="block-counter"><br>
    
    <div class="interactive-illustration">
        <svg width="800px" height="300px" viewBox="0 0 800 300">
            <g class="chaining-block first-block">
                <text x="50" y="20" font-family="sans-serif" font-size="14">m1</text>
                <path d="M 60 25 l 0 50 z" stroke="black" stroke-width="2" />
                <g class="fk-box">
                    <path d="M 5 75 l 110 0 l 0 75 l -110 0 z" stroke="black" stroke-width="2" fill="#cdcdcd" />
                    <text x="50" y="120" font-family="sans-serif" font-size="22">Fk</text>
                </g>
                <path d="M 60 150 l 0 50 z" stroke="black" stroke-width="2" />
                <text x="50" y="215" font-family="sans-serif" font-size="14">o1</text>
            </g>
            <g class="chaining-block" transform="translate(150,0)">
                <path d="M -90 175 l 75 0 l 0 -125 l 64 0 l -64 0 l 0 125 z" stroke="black" stroke-width="2" fill="transparent" />
                <text x="50" y="20" font-family="sans-serif" font-size="14">m2</text>
                <path d="M 60 25 l 0 15 z" stroke="black" stroke-width="2" />
                <text x="51" y="56" font-family="sans-serif" font-size="20">⊕</text>
                <path d="M 60 60 l 0 15 z" stroke="black" stroke-width="2" />
                <g class="fk-box">
                    <path d="M 5 75 l 110 0 l 0 75 l -110 0 z" stroke="black" stroke-width="2" fill="#cdcdcd" />
                    <text x="50" y="120" font-family="sans-serif" font-size="22">Fk</text>
                </g>
                <path d="M 60 150 l 0 50 z" stroke="black" stroke-width="2" />
                <text x="50" y="215" font-family="sans-serif" font-size="14">o2</text>
            </g>
            <g class="chaining-block" transform="translate(300,0)">
                <path d="M -90 175 l 75 0 l 0 -125 l 64 0 l -64 0 l 0 125 z" stroke="black" stroke-width="2" fill="transparent" />
                <text x="50" y="20" font-family="sans-serif" font-size="14">m3</text>
                <path d="M 60 25 l 0 15 z" stroke="black" stroke-width="2" />
                <text x="51" y="56" font-family="sans-serif" font-size="20">⊕</text>
                <path d="M 60 60 l 0 15 z" stroke="black" stroke-width="2" />
                <g class="fk-box">
                    <path d="M 5 75 l 110 0 l 0 75 l -110 0 z" stroke="black" stroke-width="2" fill="#cdcdcd" />
                    <text x="50" y="120" font-family="sans-serif" font-size="22">Fk</text>
                </g>
                <path d="M 60 150 l 0 50 z" stroke="black" stroke-width="2" />
                <text x="50" y="215" font-family="sans-serif" font-size="14">o3</text>
            </g>
        </svg>
    </div>
    <button class="cbc-submit">Run!</button>
</div>
